{% extends 'layout.html' %}

{% block title %}Add to Shortlist{% endblock %}
{% block page %}Add to Shortlist{% endblock %}

{% block content %}
  <div style="margin-top:20px; max-width:800px">
    <a href="/dashboard" class="btn btn-secondary" style="margin-bottom:12px;">‚Üê Back to Dashboard</a>
    <form method="POST" action="/shortlist/add" style="background:#fff;padding:20px;border-radius:8px;box-shadow:0 1px 6px rgba(0,0,0,.08)">
      <input type="hidden" name="position_id" value="{{ position_id or 1 }}">
      <label for="student_id">Student ID</label>
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px;">
        <input type="text" id="student_id" name="student_id" required placeholder="Enter Student ID" style="flex:1;padding:8px;border:1px solid #ddd;border-radius:4px">
        <button type="button" class="btn btn-info" onclick="document.getElementById('studentUsersModal').style.display='block'">Show Student Users</button>
      </div>
      <label for="details">Details</label>
      <textarea id="details" name="details" placeholder="Enter application details" required style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px"></textarea>
      <div style="margin-top:12px"><button type="submit" class="btn btn-primary">Add to Shortlist</button></div>
    </form>
    <!-- Student Users Modal -->
    <div id="studentUsersModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);z-index:1000;align-items:center;justify-content:center;">
      <div style="background:#fff;padding:30px;border-radius:8px;width:400px;margin:60px auto;box-shadow:0 4px 20px rgba(0,0,0,0.15);position:relative;">
        <span style="position:absolute;top:10px;right:15px;cursor:pointer;font-size:22px;" onclick="document.getElementById('studentUsersModal').style.display='none'">&times;</span>
        <h5>Student Accounts</h5>
        <ul style="list-style:none;padding:0;max-height:300px;overflow-y:auto;">
          {% for stud in students %}
            <li style="padding:8px 0;border-bottom:1px solid #eee;font-size:15px;">
              <strong>{{ stud.username }}</strong> &mdash; Student ID: {{ stud.student_id }}
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
{% endblock %}